<?php/** * */class Controller{    static $uri;    protected $viewData = array();    public function __construct (URIRequest $req)    {        self::$uri  = $req;    }        public function dispatch ()    {        global $_CONFIG;                /*         * Chargement du controller         */        $controller = self::$uri->getctr ();        $action =self::$uri->get('action', 'index');        $id = self::$uri->get('id', null);                                                                                                if (empty ($controller)) {            $controller = 'Home';        }                    if (file_exists (DIR_CONTROLLERS.$controller.'Controller.php')) {            include (DIR_CONTROLLERS.$controller.'Controller.php');               $class = $controller."Controller";            $objet = new $class(self::$uri);            $objet->$action($id);        } else {            throw new Exception ('Controller introuvable');        }    }    protected function view ($action)    {        /* Récupérer le controlleur a partir de classe fille.*/        $controller = str_replace('Controller', '', get_class($this));                /* La vue correspondant */        $view = $controller . '/' . $action.'.phtml';        include(dirname(__FILE__).'/../Views/'.$view);    }    /*      * Rederiction vers une action      *     */    protected function redirectAction()    {        $arg_list = func_get_args();        $url = '';        if(count($arg_list) == 1) {            $url .= '?controller='.$arg_list[0];        } elseif (count($arg_list)== 2) {            $url .= '?controller='.$arg_list[0].'&action='.$arg_list[1];        } else {            $url .= '?controller='.$arg_list[0].'&action='.$arg_list[1].'&id='.$arg_list[2];        }        header('Location: '.$url);        exit;    }}